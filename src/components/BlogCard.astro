---
import type { Post } from "../interfaces/Posts";
import { getPostCategory } from "../utils";
import Pill from "./Pill";

interface Props extends Post {}

const post = Astro.props;

const postDate = post.attributes?.eventDate ?? post.attributes.publishedAt;
---

<div
  id={post.id.toString()}
  class="flex flex-col overflow-hidden rounded-lg shadow-lg"
>
  <div class="flex-shrink-0">
    <img
      class="h-48 w-full object-cover"
      src={post.attributes.image.data?.attributes.url}
      alt={post.attributes.image.data?.attributes.caption || "post image"}
    />
  </div>
  <div class="flex flex-1 flex-col justify-between bg-white p-6">
    <div class="flex-1">
      <p class="text-sm font-medium text-teal">
        <a
          href={`/blog?category=${getPostCategory(post)}`}
          class="inline-flex items-center rounded-full px-3 py-0.5 font-medium bg-white text-teal text-xs py ml-auto border-2 shadow-darkBlue"
        >
          {getPostCategory(post)}
        </a>
      </p>
    </div>
    <a
      href={`/blog/${post.attributes.slug}`}
      class="mt-2 block text-dark h-[140px] font-sans overflow-hidden"
    >
      <p class="text-xl font-semibold text-dark">
        {post.attributes.title}
      </p>
      <div>
        <p set:html={post.attributes.content} class="mt-3 text-base" />
      </div>
    </a>
  </div>
  <div class="mt-6 flex items-center">
    <div class="ml-0">
      <div class="flex space-x-1 text-sm text-dark">
        <time datetime={postDate}
          >{
            new Date(postDate).toLocaleDateString("en-US", {
              dateStyle: "long",
            })
          }</time
        >
      </div>
    </div>
  </div>
</div>
