---
import type Posts from "../interfaces/Posts";

interface Props {
  posts: Posts;
}

const {
  posts: { data, meta },
} = Astro.props;
---

<div class="relative bg-gray-50 px-6 pb-20 pt-16 lg:px-8 lg:pb-28 lg:pt-24">
  <div class="absolute inset-0">
    <div class="h-1/3 bg-white sm:h-2/3"></div>
  </div>
  <div class="relative mx-auto max-w-7xl">
    <div class="text-center">
      <h2 class="text-3xl font-bold tracking-tight text-dark sm:text-4xl">
        From the blog
      </h2>
      <p class="mx-auto mt-3 max-w-2xl text-xl text-dark sm:mt-4">
        Lorem ipsum dolor sit amet consectetur, adipisicing elit. Ipsa libero
        labore natus atque, ducimus sed.
      </p>
    </div>
    <div class="mx-auto mt-12 grid max-w-lg gap-5 lg:max-w-none lg:grid-cols-3">
      {
        data.map((post) => (
          <div
            id={post.id.toString()}
            class="flex flex-col overflow-hidden rounded-lg shadow-lg"
          >
            <div class="flex-shrink-0">
              <img
                class="h-48 w-full object-cover"
                src={post.attributes.image.data.attributes.url}
                alt={
                  post.attributes.image.data.attributes.caption || "post image"
                }
              />
            </div>
            <div class="flex flex-1 flex-col justify-between bg-white p-6">
              <div class="flex-1">
                <p class="text-sm font-medium text-teal">
                  {post?.attributes?.categories?.data.map((c) => (
                    <a
                      href={`/blog/category/${c.attributes.name
                        .toLowerCase()
                        .split(" ")
                        .join("-")}`}
                      class="hover:underline"
                    >
                      {c.attributes.name}
                    </a>
                  ))}
                </p>
                <a
                  href={`/blog/${post.attributes.slug}`}
                  class="mt-2 block text-dark h-[140px] font-sans overflow-hidden"
                >
                  <p class="text-xl font-semibold text-dark">
                    {post.attributes.title}
                  </p>
                  <div>
                    <p
                      set:html={post.attributes.content}
                      class="mt-3 text-base"
                    />
                  </div>
                </a>
              </div>
              <div class="mt-6 flex items-center">
                <div class="ml-0">
                  <p class="text-sm font-medium text-dark">
                    <a href="#" class="hover:underline">
                      Roel Aufderehar
                    </a>
                  </p>
                  <div class="flex space-x-1 text-sm text-dark">
                    <time datetime="2020-03-16">Mar 16, 2020</time>
                    <span aria-hidden="true">&middot;</span>
                    <span>6 min read</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        ))
      }
    </div>
  </div>
</div>
